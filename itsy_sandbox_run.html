<div id="screen" style="margin-left: 50px"></div>
<a onclick='fullscreen()'>fullscreen</a/>

<script src="js/core.js"></script>
<script src="js/screen.js"></script>
<script src="js/experimental.js"></script>
<script src="js/font.js"></script>
<script src="js/rom.js"></script>
<script src="js/mouse.js"></script>
<script src="js/sound.js"></script>

<script>
	
	async function boot() {
		init(320,200,3,10)
		cls(15)
	}

	function update() {
		//console.log('fc.xxx', fc.xxx)
		//halt()
	}

	function draw() {
		t0 = time()
		if (1) {
			cls(0)
			rect(10,10,100,100,1)
			camera(10,10)
			pal(1,2)
			rect(10,10,100,100,1)
			color(3)
			rect(40,40,100,100)
			pal(9,1)
			
			
			blit(60,60,0,120,64,64,0,9)
			blit(0,0,0,224,256,32,0,9)
			blit(130,60,0,0,64,64,0,9)
			blit(200,60,0,120,64,64,0,9)
			blit(60,130,0,120,64,64,8,9)
			
			
			camera(0,0)
			pal()
			color(4)
			
			str([0,1,2,3,4,5,6,7,8,9,10], 150, 140, 0, 11,1)
			chr(2, 150, 160, 0, 11, 1)
			text("HELLO world!!!", 150, 180, 0)
			text("HELLO world!!!", 150, 188, 8)
		}
		
		let [mx,my,mb] = mouse()
		//console.log('mouse',mx,my,mb)
		
		if ((mb[1]==3) || (mb[2]==3)) {
			console.log('mouse_delay',time()-fc.xxx_ts, 'render_delay',time()-t0,'mouse',mx,my,mb)
			console.log('fps max',1000*fc.main_cnt/fc.main_total_ms)
			rect(mx, my, mb[1]*5,mb[1]*5, 2+mb[1])
			snd(parseInt(mx/(fc.width/88) + 1), 0.25, mb[1]==3 ? 'square' : 'sawtooth')
		}
		//halt()
		if (fc.main_cnt%100==0) {
			//console.log('fps max',1000*fc.main_cnt/fc.main_total_ms)
		}
	}
	
	run(boot, update, draw)
	//run(boot)
	
</script>

